<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This wrapper function allows to simultaneously pool effect sizes using
different meta-analytic approaches."><title>Run different types of meta-analyses — runMetaAnalysis • metapsyTools</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><link href="../deps/_Fira%20Sans-0.4.0/font.css" rel="stylesheet"><link href="../deps/_Fira%20Code-0.4.0/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Run different types of meta-analyses — runMetaAnalysis"><meta property="og:description" content="This wrapper function allows to simultaneously pool effect sizes using
different meta-analytic approaches."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><script src="extra_script_header.js"></script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">metapsyTools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/metapsyTools.html">Get Started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Documentation</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/MathiasHarrer/metapsyTools/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Run different types of meta-analyses</h1>
      <small class="dont-index">Source: <a href="https://github.com/MathiasHarrer/metapsyTools/blob/HEAD/R/runMetaAnalysis.R" class="external-link"><code>R/runMetaAnalysis.R</code></a></small>
      <div class="d-none name"><code>runMetaAnalysis.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This wrapper function allows to simultaneously pool effect sizes using
different meta-analytic approaches.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">runMetaAnalysis</span><span class="op">(</span><span class="va">data</span>,
                which.run <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"overall"</span>, <span class="st">"combined"</span>,
                              <span class="st">"lowest.highest"</span>, <span class="st">"outliers"</span>,
                              <span class="st">"influence"</span>, <span class="st">"rob"</span>, <span class="st">"threelevel"</span>,
                              <span class="st">"threelevel.che"</span><span class="op">)</span>,
                method.tau <span class="op">=</span> <span class="st">"REML"</span>,
                hakn <span class="op">=</span> <span class="cn">TRUE</span>,
                study.var <span class="op">=</span> <span class="st">"study"</span>,
                arm.var.1 <span class="op">=</span> <span class="st">"Cond_spec_trt1"</span>,
                arm.var.2 <span class="op">=</span> <span class="st">"Cond_spec_trt2"</span>,
                measure.var <span class="op">=</span> <span class="st">"Outc_measure"</span>,
                es.var <span class="op">=</span> <span class="st">"es"</span>,
                se.var <span class="op">=</span> <span class="st">"se"</span>,
                low.rob.filter <span class="op">=</span> <span class="st">"rob &gt; 2"</span>,
                method.tau.ci <span class="op">=</span> <span class="st">"Q-Profile"</span>,
                round.digits <span class="op">=</span> <span class="fl">2</span>,
                which.outliers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"general"</span>, <span class="st">"combined"</span><span class="op">)</span>,
                which.influence <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"general"</span>, <span class="st">"combined"</span><span class="op">)</span>,
                which.rob <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"general"</span>, <span class="st">"combined"</span><span class="op">)</span>,
                nnt.cer <span class="op">=</span> <span class="fl">0.2</span>,
                rho.within.study <span class="op">=</span> <span class="fl">0.5</span>,
                use.rve <span class="op">=</span> <span class="cn">TRUE</span>,
                html <span class="op">=</span> <span class="cn">TRUE</span>,
                <span class="va">...</span><span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p><code>data.frame</code>. Effect size data in the wide format, as created by <code><a href="calculateEffectSizes.html">calculateEffectSizes</a></code>.</p></dd>
<dt>which.run</dt>
<dd><p><code>character</code>. Selection of models to be calculated. See 'Details'.</p></dd>
<dt>method.tau</dt>
<dd><p><code>character</code>. A character string indicating which method is used to estimate the
between-study variance (tau-squared) and its square root (tau). Either <code>"REML"</code> (default), <code>"DL"</code>,
<code>"PM"</code>, <code>"ML"</code>, <code>"HS"</code>, <code>"SJ"</code>, <code>"HE"</code>, or <code>"EB"</code>, can be abbreviated (see
<code><a href="https://rdrr.io/pkg/meta/man/metagen.html" class="external-link">metagen</a></code>). Use <code>"FE"</code> to use a fixed-effect/"common effect" model.</p></dd>
<dt>hakn</dt>
<dd><p><code>logical</code>. Should the Knapp-Hartung adjustment for effect size significance tests be used? Default is <code>TRUE</code>.</p></dd>
<dt>study.var</dt>
<dd><p><code>character</code>. The name of the variable in <code>data</code> in which the study IDs are stored.</p></dd>
<dt>arm.var.1</dt>
<dd><p><code>character</code>. The name of the variable in <code>data</code> in which the condition (e.g. "guided iCBT")
of the <em>first</em> arm within a comparison are stored.</p></dd>
<dt>arm.var.2</dt>
<dd><p><code>character</code>. The name of the variable in <code>data</code> in which the condition (e.g. "wlc")
of the <em>second</em> arm within a comparison are stored.</p></dd>
<dt>measure.var</dt>
<dd><p><code>character</code>. The name of the variable in <code>data</code> in which the instrument used for the comparison is stored.</p></dd>
<dt>es.var</dt>
<dd><p><code>character</code>. The name of the variable in <code>data</code> in which the calculated effect sizes (i.e. Hedges' <em>g</em>)
are stored.</p></dd>
<dt>se.var</dt>
<dd><p><code>character</code>. The name of the variable in <code>data</code> in which the standard error of the calculated effect sizes (i.e. Hedges' <em>g</em>)
are stored.</p></dd>
<dt>low.rob.filter</dt>
<dd><p><code>character</code>. A filtering statement by which to include studies for the "low RoB only" analysis.
Please note that the name of the variable must be included as a column in <code>data</code>.</p></dd>
<dt>method.tau.ci</dt>
<dd><p><code>character</code>. A character string indicating which method is used to estimate the
confidence interval of tau/tau-squared. Either <code>"Q-Profile"</code> (default and recommended),
<code>"BJ"</code>, <code>"J"</code>, or <code>"PL"</code> can be abbreviated. See <code><a href="https://rdrr.io/pkg/meta/man/metagen.html" class="external-link">metagen</a></code> for details.</p></dd>
<dt>round.digits</dt>
<dd><p><code>numeric</code>. Number of digits to round the (presented) results by. Default is <code>2</code>.</p></dd>
<dt>which.outliers</dt>
<dd><p><code>character</code>. Which model should be used to conduct outlier analyses? Must be
<code>"general"</code> or <code>"combined"</code>, with <code>"general"</code> being the default.</p></dd>
<dt>which.influence</dt>
<dd><p><code>character</code>. Which model should be used to conduct influence analyses? Must be
<code>"general"</code> or <code>"combined"</code>, with <code>"general"</code> being the default.</p></dd>
<dt>which.rob</dt>
<dd><p><code>character</code>. Which model should be used to conduct the "low risk of bias only" analyses? Must be
<code>"general"</code> or <code>"combined"</code>, with <code>"general"</code> being the default.</p></dd>
<dt>nnt.cer</dt>
<dd><p><code>numeric</code>. Value between 0 and 1, indicating the assumed control group event rate to be used
for calculating NNTs via the Furukawa-Leucht method.</p></dd>
<dt>rho.within.study</dt>
<dd><p><code>numeric</code>. Value between 0 and 1, indicating the assumed correlation of effect sizes
within studies. This is relevant to combine effect sizes for the <code>"combined"</code> analysis type, and used to estimate
the variance-covariance matrices needed for the conditional and hierarchical effects three-level model. Default is <code>0.5</code>.</p></dd>
<dt>use.rve</dt>
<dd><p><code>logical</code>. Should robust variance estimation be used to calculate confidence intervals and tests of three-level models?
<code>TRUE</code> by default.</p></dd>
<dt>html</dt>
<dd><p><code>logical</code>. Should an HTML table be created for the results? Default is <code>TRUE</code>.</p></dd>
<dt>...</dt>
<dd><p>Additional arguments.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Returns an object of class <code>"runMetaAnalysis"</code>. This object includes, among other things,
a <code>data.frame</code> with the name <code>summary</code>, in which all results are summarized - including the
studies which were removed for some analysis steps. Other objects are the "raw" model objects returned
by all selected analysis types. This allows to conduct further operations on some models specifically (e.g.
run a meta-regression by plugging one of the model objects in <code>update.meta</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The <code>runMetaAnalysis</code> function is a wrapper for several types of meta-analytic models
that are typically used. It allows to run all of these models in one step in order to generate results
that are somewhat closer to being "publication-ready".</p>
<p>By default, the following models are calculated:</p>
<ul><li><p><code>"overall"</code>. Runs a generic inverse-variance (random-effects) model. All included
  effect sizes are treated as independent.</p></li>
<li><p><code>"combined"</code>. Pools all effect sizes within one study (defined by <code>study.var</code>) before
  pooling. This ensures that all effect sizes are independent (i.e., unit-of-analysis error &amp;
  double-counting is avoided). To combine the effects, one has to assume a correlation of effect sizes
  within studies, empirical estimates of which are typically not available.</p></li>
<li><p><code>"lowest.highest"</code>. Runs a meta-analysis, but with only (i) the lowest and (ii) highest
  effect size within each study included.</p></li>
<li><p><code>"outlier"</code>. Runs a meta-analysis without statistical outliers (i.e. effect sizes for which
  the confidence interval does not overlap with the confidence intervall of the overall effect).</p></li>
<li><p><code>"influence"</code>. Runs a meta-analysis without influential cases (see <code><a href="https://wviechtb.github.io/metafor/reference/influence.rma.uni.html" class="external-link">influence.rma.uni</a></code> for
  details).</p></li>
<li><p><code>"rob"</code>. Runs a meta-analysis with only low-RoB studies included.</p></li>
<li><p><code>"threelevel"</code>. Runs a multilevel (three-level) meta-analysis model, with effect sizes nested
  in studies.</p></li>
<li><p><code>"threelevel.che"</code>. Runs a multilevel (three-level) meta-analysis model, with effect sizes nested
  in studies. Variance-covariance matrices of each study with two or more effect sizes are estimated using
  <code>rho.within.study</code> as the assumed overall within-study correlation. This imputation allows to run a "correlated and
  hierarchical effects" (CHE) model, which is typically a good approximation for data sets with unknown and/or
  complex dependence structures.</p></li>
</ul><p>For more details see the help vignette: <code><a href="../articles/metapsyTools.html">vignette("metapsyTools")</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="calculateEffectSizes.html">calculateEffectSizes</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Mathias Harrer <a href="mailto:mathias.h.harrer@gmail.com">mathias.h.harrer@gmail.com</a>,
Paula Kuper <a href="mailto:paula.r.kuper@gmail.com">paula.r.kuper@gmail.com</a>, Pim Cuijpers <a href="mailto:p.cuijpers@vu.nl">p.cuijpers@vu.nl</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"inpatients"</span><span class="op">)</span></span>
<span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/guido-s/meta/" class="external-link">meta</a></span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">inpatients</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">   <span class="fu"><a href="checkDataFormat.html">checkDataFormat</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">     <span class="fu"><a href="checkConflicts.html">checkConflicts</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">     <span class="fu"><a href="expandMultiarmTrials.html">expandMultiarmTrials</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">     <span class="fu"><a href="calculateEffectSizes.html">calculateEffectSizes</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">data</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Run the meta-analyses</span></span>
<span class="r-in"><span class="fu">runMetaAnalysis</span><span class="op">(</span><span class="va">data</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">res</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Show summary</span></span>
<span class="r-in"><span class="va">res</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Show forest plot (by default, "general" is used)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Show forest plot of specific analysis</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">res</span>, <span class="st">"outliers"</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">res</span>, <span class="st">"threelevel"</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">res</span>, <span class="st">"baujat"</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">res</span>, <span class="st">"influence"</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">res</span>, <span class="st">"lowest.highest"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Extract specific model and do further calculations</span></span>
<span class="r-in"><span class="co"># (e.g. meta-regression on 'year')</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/pkg/meta/man/metareg.html" class="external-link">metareg</a></span><span class="op">(</span><span class="va">res</span><span class="op">$</span><span class="va">model.overall</span>, <span class="op">~</span><span class="va">year</span><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Mathias Harrer, Paula Kuper, Pim Cuijpers.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
</div>

    </footer></div>

  

  <script src="extra_script.js"></script></body></html>

