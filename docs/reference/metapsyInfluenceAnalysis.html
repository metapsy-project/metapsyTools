<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Conducts an influence analysis of a meta-analysis generated by meta functions,
and allows to produce influence diagnostic plots."><title>Influence Diagnostics — metapsyInfluenceAnalysis • metapsyTools</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><link href="../deps/_Fira%20Sans-0.4.1/font.css" rel="stylesheet"><link href="../deps/_Fira%20Code-0.4.1/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Influence Diagnostics — metapsyInfluenceAnalysis"><meta property="og:description" content="Conducts an influence analysis of a meta-analysis generated by meta functions,
and allows to produce influence diagnostic plots."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><script src="extra_script_header.js"></script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">metapsyTools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.5</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/metapsyTools.html">Get Started</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-documentation">Documentation</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-documentation">
    <a class="dropdown-item" href="../reference/index.html">Function Reference</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../articles/web/installation.html">Installation Guide</a>
    <a class="dropdown-item" href="../articles/web/look_inside.html">A Look Inside</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/metapsy-project/metapsyTools/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Influence Diagnostics</h1>
      <small class="dont-index">Source: <a href="https://github.com/metapsy-project/metapsyTools/blob/HEAD/R/metapsyInfluenceAnalysis.R" class="external-link"><code>R/metapsyInfluenceAnalysis.R</code></a></small>
      <div class="d-none name"><code>metapsyInfluenceAnalysis.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Conducts an influence analysis of a meta-analysis generated by <code><a href="https://rdrr.io/pkg/meta/man/meta-package.html" class="external-link">meta</a></code> functions,
and allows to produce influence diagnostic plots.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">metapsyInfluenceAnalysis</span><span class="op">(</span><span class="va">x</span>, random <span class="op">=</span> <span class="cn">FALSE</span>, subplot.heights <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">30</span>,<span class="fl">18</span><span class="op">)</span>,
    subplot.widths <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">30</span>,<span class="fl">30</span><span class="op">)</span>, forest.lims <span class="op">=</span> <span class="st">'default'</span>,
    return.separate.plots <span class="op">=</span> <span class="cn">FALSE</span>, text.scale <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>x</dt>
<dd><p>An object of class <code>meta</code>, generated by the <code>metabin</code>, <code>metagen</code>,
<code>metacont</code>, <code>metacor</code>, <code>metainc</code>, <code>metarate</code> or <code>metaprop</code> function.</p></dd>
<dt>random</dt>
<dd><p>Logical. Should the random-effects model be used to generate the influence diagnostics?
Uses the <code>method.tau</code> specified in the <code>meta</code> object if one
of "<code>DL</code>", "<code>HE</code>", "<code>SJ</code>", "<code>ML</code>", "<code>REML</code>", "<code>EB</code>", "<code>PM</code>", "<code>HS</code>" or "<code>GENQ</code>" (to ensure compatibility with
the <code><a href="https://wviechtb.github.io/metafor/reference/metafor-package.html" class="external-link">metafor</a></code> package). Otherwise, the DerSimonian-Laird
(<code>"DL"</code>; DerSimonian &amp; Laird, 1986) estimator is used. <code>FALSE</code> by default.</p></dd>
<dt>subplot.heights</dt>
<dd><p>Concatenated array of two numerics. Specifies the heights of the
first (first number) and second (second number) row of the overall plot generated when plotting the results.
Default is <code>c(30,18)</code>.</p></dd>
<dt>subplot.widths</dt>
<dd><p>Concatenated array of two numerics. Specifies the widths of the
first (first number) and second (second number) column of the overall results plot generated when plotting the results.
Default is <code>c(30,30)</code>.</p></dd>
<dt>forest.lims</dt>
<dd><p>Concatenated array of two numerics. Specifies the x-axis limits of the forest plots
generated when plotting the results. Use <code>"default"</code> if standard settings should be used (this is the default).</p></dd>
<dt>return.separate.plots</dt>
<dd><p>Logical. When plotted, should the influence plots be shown as separate plots in lieu
of returning them in one overall plot?</p></dd>
<dt>text.scale</dt>
<dd><p>Positive numeric. Scaling factor for the text geoms used when plotting the results. Values &lt;1 shrink the
text, while values &gt;1 increase the text size. Default is <code>1</code>.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>list</code> object of class <code>influence.analysis</code> containing the
following objects is returned (if results are saved to a variable):</p><ul><li><p><code>BaujatPlot</code>: The Baujat plot</p></li>
<li><p><code>InfluenceCharacteristics</code>: The Viechtbauer-Cheung influence characteristics plot</p></li>
<li><p><code>ForestEffectSize</code>: The forest plot sorted by effect size</p></li>
<li><p><code>ForestI2</code>: The forest plot sorted by between-study heterogeneity</p></li>
<li><p><code>Data</code>: A <code>data.frame</code> containing the data used for plotting.</p></li>
</ul><p>Otherwise, the function prints out (1) the results of the Leave-One-Out Analysis (sorted by \(I^2\)),
(2) the Viechtbauer-Cheung Influence Diagnostics and  (3) Baujat Plot data (sorted by heterogeneity contribution),
in this order. Plots can be produced manually by plugging a saved object of class <code>InfluenceAnalysis</code> generated by
the function into the <code>plot</code> function. It is also possible to only produce one specific plot by
specifying the name of the plot as a <code>character</code> in the second argument of the <code>plot</code> call (see Examples).</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function conducts an influence analysis using the "Leave-One-Out" paradigm internally
and produces data for four influence diagnostics. Diagnostic plots can be produced by saving the output of the
function to an object and plugging it into the <code>plot</code> function.
These diagnostics may be used to determine which study or effect size
may have an excessive influence on the overall results of a meta-analysis and/or contribute substantially to
the between-study heterogeneity in an analysis. This may be used for outlier detection and to test
the robustness of the overall results found in an analysis. Results for four diagnostics are calculated:</p><ul><li><p><strong>Baujat Plot</strong>: Baujat et al. (2002) proposed a plot to evaluate heterogeneity patterns in
a meta-analysis. The x-axis of the Baujat plot shows the overall heterogeneity contribution of each effect size
while the y-axis shows the influence of each effect size on the pooled result. The <code><a href="https://rdrr.io/pkg/meta/man/baujat.meta.html" class="external-link">baujat</a></code>
function is called internally to produce the results. Effect sizes or studies with high values
on both the x and y-axis may be considered to be influential cases; effect sizes or studies
with high heterogeneity contribution (x-axis) and low influence on the overall results can be outliers
which might be deleted to reduce the amount of between-study heterogeneity.</p></li>
<li><p><strong>Influence Characteristics</strong>: Several influence analysis diagnostics
proposed by Viechtbauer &amp; Cheung (2010). Results are calculated by an internal call
to <code><a href="https://wviechtb.github.io/metafor/reference/influence.rma.uni.html" class="external-link">influence.rma.uni</a></code>. In the console output, potentially influential studies are marked
with an asterisk (<code>*</code>). When plotted, effect sizes/studies determined to be influential cases
using the "rules of thumb" described in Viechtbauer &amp; Cheung (2010) are shown in red. For further
details, see the documentation of the <code><a href="https://wviechtb.github.io/metafor/reference/influence.rma.uni.html" class="external-link">influence.rma.uni</a></code> function.</p></li>
<li><p><strong>Forest Plot for the Leave-One-Out Analysis, sorted by Effect Size</strong>: This
displays the effect size and \(I^2\)-heterogeneity when omitting one of the \(k\) studies each time.
The plot is sorted by effect size to determine which studies or effect sizes particularly
affect the overall effect size. Results are generated by an internal call to <code><a href="https://rdrr.io/pkg/meta/man/metainf.html" class="external-link">metainf</a></code>.</p></li>
<li><p><strong>Forest Plot for the Leave-One-Out Analysis, sorted by \(I^2\)</strong>: see above; results are sorted
by \(I^2\) to determine the study for which exclusion results in the greatest reduction of heterogeneity.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Harrer, M., Cuijpers, P., Furukawa, T.A, &amp; Ebert, D. D. (2019).
<em>Doing Meta-Analysis in R: A Hands-on Guide</em>. DOI: 10.5281/zenodo.2551803. <a href="https://bookdown.org/MathiasHarrer/Doing_Meta_Analysis_in_R/influenceanalyses.html" class="external-link">Chapter 6.3</a></p>
<p>DerSimonian R. &amp; Laird N. (1986), Meta-analysis in clinical trials. <em>Controlled Clinical Trials, 7</em>, 177–188.</p>
<p>Viechtbauer, W., &amp; Cheung, M. W.-L. (2010). Outlier and influence diagnostics for meta-analysis. <em>Research Synthesis Methods, 1</em>, 112–125.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://wviechtb.github.io/metafor/reference/influence.rma.uni.html" class="external-link">influence.rma.uni</a></code>, <code><a href="https://rdrr.io/pkg/meta/man/metainf.html" class="external-link">metainf</a></code>, <code><a href="https://rdrr.io/pkg/meta/man/baujat.meta.html" class="external-link">baujat</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Mathias Harrer &amp; David Daniel Ebert</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"></span>
<span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"><span class="co"># Load 'ThirdWave' data</span></span>
<span class="r-in"><span class="fu"><a href="Replacement-functions.html">data</a></span><span class="op">(</span><span class="va">ThirdWave</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Create 'meta' meta-analysis object</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">suppressPackageStartupMessages</a></span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/guido-s/meta/" class="external-link">meta</a></span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="va">meta</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/meta/man/metagen.html" class="external-link">metagen</a></span><span class="op">(</span><span class="va">TE</span>, <span class="va">seTE</span>, studlab <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">ThirdWave</span><span class="op">$</span><span class="va">Author</span><span class="op">)</span>, data<span class="op">=</span><span class="va">ThirdWave</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Run influence analysis; specify to return separate plots when plotted</span></span>
<span class="r-in"><span class="va">inf.an</span> <span class="op">=</span> <span class="fu"><a href="http://dmetar.protectlab.org/reference/InfluenceAnalysis.html" class="external-link">InfluenceAnalysis</a></span><span class="op">(</span><span class="va">meta</span>, return.separate.plots <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Show results in console</span></span>
<span class="r-in"><span class="va">inf.an</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Generate all plots</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">inf.an</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># For baujat plot</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">inf.an</span>, <span class="st">"baujat"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># For influence diagnostics plot</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">inf.an</span>, <span class="st">"influence"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># For forest plot sorted by effect size</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">inf.an</span>, <span class="st">"ES"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># For forest plot sorted by I-squared</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">inf.an</span>, <span class="st">"I2"</span><span class="op">)</span><span class="op">}</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Mathias Harrer, Paula Kuper, Antonia Sprenger, Pim
Cuijpers.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
</div>

    </footer></div>

  

  <script src="extra_script.js"></script></body></html>

